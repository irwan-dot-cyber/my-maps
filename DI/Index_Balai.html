<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Link Peta Daerah Irigasi per Balai</title>
  <meta name="description" content="Daftar tautan peta Daerah Irigasi per Balai/BBWS/BWS."/>
  <link rel="icon" href="../assets/LogoPUPR.png" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme:{extend:{
        fontFamily:{sans:['Inter','ui-sans-serif','system-ui']},
        colors:{survey:'#0d47a1',surveyDark:'#0a3a85',surveyLight:'#1d5fd1'},
        boxShadow:{header:'0 4px 14px rgba(13,71,161,.18)'}
      }}
    }
  </script>

  <style>
    html{scroll-behavior:smooth}
    :focus-visible{outline:2px solid #1d5fd1;outline-offset:2px}
    /* Badge Si-Irwan */
    .badge-irwan{
      position:fixed; right:16px; bottom:12px; z-index:80;
      background:rgba(13,71,161,.85);
      border:1px solid rgba(255,255,255,.25);
      color:#fff; font-size:13px; font-weight:700;
      padding:6px 12px; border-radius:10px;
      box-shadow:0 0 10px rgba(13,71,161,.6);
      backdrop-filter:blur(6px);
      animation:glow 2.8s ease-in-out infinite;
    }
    .badge-irwan span{ color:#FFD700; }
    @keyframes glow{
      0%,100%{ box-shadow:0 0 8px rgba(13,71,161,.6); }
      50%    { box-shadow:0 0 18px rgba(255,215,0,.8); }
    }
  </style>
</head>
<body class="font-sans antialiased bg-[#0b1222] text-slate-100">

  <!-- Header -->
  <header class="sticky top-0 z-40 bg-survey text-white">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="../index.html" class="flex items-center gap-3">
        <img src="../assets/LogoPUPR.png" class="w-9 h-9" alt="PUPR"/>
        <div class="leading-tight">
          <div class="text-xs uppercase tracking-wide text-white/80">Kementerian Pekerjaan Umum</div>
          <div class="font-semibold">Direktorat Jenderal Sumber Daya Air</div>
          <div class="text-xs text-white/80">Direktorat Irigasi & Rawa</div>
        </div>
      </a>
      <a href="my-maps/si-irwan.html" class="text-sm bg-white text-survey px-3 py-2 rounded-lg font-semibold">Beranda</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-gradient-to-b from-[#0b1222] via-[#0b1222]/60 to-transparent">
    <div class="max-w-7xl mx-auto px-4 py-8">
      <h1 class="text-2xl md:text-3xl font-extrabold">Link Peta Daerah Irigasi per Balai</h1>
      <p class="mt-2 text-slate-300">Pilih salah satu Balai/BBWS/BWS untuk membuka peta DI wilayahnya.</p>
    </div>
  </section>

  <!-- Toolbar -->
  <section class="py-4">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex flex-col md:flex-row md:items-center gap-3">
        <div class="flex-1">
          <input id="q" type="search" placeholder="Cari balai… (mis. ‘Brantas’, ‘Serayu’, ‘Papua’)"
            class="w-full px-4 py-3 rounded-xl border border-white/10 bg-white/10 placeholder:text-slate-400 text-white"/>
        </div>

        <!-- Dropdown Custom -->
        <div class="relative inline-block text-left">
          <button id="dropWilayahBtn" aria-haspopup="true" aria-expanded="false"
            class="inline-flex justify-between items-center px-4 py-3 bg-white/10 border border-white/10 rounded-xl text-white w-48 font-medium hover:bg-white/20 transition">
            Semua Wilayah ▾
          </button>
          <div id="dropWilayahMenu"
            class="hidden absolute mt-2 w-48 bg-white rounded-xl shadow-lg ring-1 ring-black/10 z-50">
            <div class="py-1 text-sm text-slate-800">
              <!-- beri class .opt agar selector JS tidak kena wrapper -->
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Sumatera</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Jawa</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Kalimantan</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Sulawesi</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Bali–Nusa</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Maluku</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Papua</div>
            </div>
          </div>
        </div>

        <button id="reset" class="px-4 py-3 rounded-xl border border-white/15 text-white/90 hover:text-white">Reset</button>
      </div>

      <div class="mt-3 text-sm text-slate-300" id="countInfo">Menampilkan 38 balai</div>
    </div>
  </section>

  <!-- Grid -->
  <section class="py-6">
    <div class="max-w-7xl mx-auto px-4">
      <div id="grid" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>
    </div>
  </section>

  <footer class="border-t border-white/10 mt-10">
    <div class="max-w-7xl mx-auto px-4 py-8 text-sm text-slate-300 flex items-center justify-between">
      <span>© 2025</span>
    </div>
  </footer>

  <!-- Badge Si-Irwan -->
  <div class="badge-irwan" title="Sistem Informasi Irigasi & Rawa Nasional">
    <span>Si-Irwan v1.0</span>
  </div>

  <script>
    // === DATA BALAI ===
    const BALAI = [
      { nama:'BWS Sumatera I - Banda Aceh', wilayah:'Sumatera' },
      { nama:'BBWS Sumatera II - Medan', wilayah:'Sumatera' },
      { nama:'BWS Sumatera III - Pekanbaru', wilayah:'Sumatera' },
      { nama:'BWS Sumatera IV - Batam', wilayah:'Sumatera' },
      { nama:'BWS Sumatera V - Padang', wilayah:'Sumatera' },
      { nama:'BWS Sumatera VI - Jambi', wilayah:'Sumatera' },
      { nama:'BWS Sumatera VII - Bengkulu', wilayah:'Sumatera' },
      { nama:'BBWS Sumatera VIII - Palembang', wilayah:'Sumatera' },
      { nama:'BWS Bangka Belitung', wilayah:'Sumatera' },
      { nama:'BBWS Mesuji Sekampung', wilayah:'Sumatera' },

      { nama:'BBWS Cidanau, Ciujung, Cidurian', wilayah:'Jawa' },
      { nama:'BBWS Ciliwung Cisadane', wilayah:'Jawa' },
      { nama:'BBWS Citarum', wilayah:'Jawa' },
      { nama:'BBWS Cimanuk Cisanggarung', wilayah:'Jawa' },
      { nama:'BBWS Citanduy', wilayah:'Jawa' },
      { nama:'BBWS Pemali Juana', wilayah:'Jawa' },
      { nama:'BBWS Bengawan Solo', wilayah:'Jawa' },
      { nama:'BBWS Serayu Opak', wilayah:'Jawa' },
      { nama:'BBWS Brantas', wilayah:'Jawa' },

      { nama:'BWS Kalimantan I - Pontianak', wilayah:'Kalimantan' },
      { nama:'BWS Kalimantan II - Palangkaraya', wilayah:'Kalimantan' },
      { nama:'BWS Kalimantan III - Banjarmasin', wilayah:'Kalimantan' },
      { nama:'BWS Kalimantan IV - Samarinda', wilayah:'Kalimantan' },
      { nama:'BWS Kalimantan V - Tanjung Selor', wilayah:'Kalimantan' },

      { nama:'BWS Sulawesi I - Manado', wilayah:'Sulawesi' },
      { nama:'BWS Sulawesi II - Gorontalo', wilayah:'Sulawesi' },
      { nama:'BWS Sulawesi III - Palu', wilayah:'Sulawesi' },
      { nama:'BWS Sulawesi IV - Kendari', wilayah:'Sulawesi' },
      { nama:'BWS Sulawesi V - Mamuju', wilayah:'Sulawesi' },
      { nama:'BBWS Pompengan Jeneberang', wilayah:'Sulawesi' },

      { nama:'BWS Maluku', wilayah:'Maluku' },
      { nama:'BWS Maluku Utara', wilayah:'Maluku' },

      { nama:'BWS Bali-Penida', wilayah:'Bali–Nusa' },
      { nama:'BBWS Nusa Tenggara I - Mataram', wilayah:'Bali–Nusa' },
      { nama:'BBWS Nusa Tenggara II - Kupang', wilayah:'Bali–Nusa' },

      { nama:'BWS Papua', wilayah:'Papua' },
      { nama:'BWS Papua Barat', wilayah:'Papua' },
      { nama:'BWS Papua Merauke', wilayah:'Papua' }
    ].map(b => ({...b, slug:b.nama.toLowerCase().replace(/[^a-z0-9]+/g,'-')}));

    const grid = document.getElementById('grid');
    const q = document.getElementById('q');
    const resetBtn = document.getElementById('reset');
    const countInfo = document.getElementById('countInfo');
    const btnW = document.getElementById('dropWilayahBtn');
    const menuW = document.getElementById('dropWilayahMenu');
    let selectedWilayah = "";

    // === DROPDOWN ===
    btnW.addEventListener('click', ()=>{
      const open = menuW.classList.toggle('hidden');
      btnW.setAttribute('aria-expanded', open ? 'false':'true');
    });
    document.addEventListener('click', e=>{
      if(!btnW.contains(e.target) && !menuW.contains(e.target)) menuW.classList.add('hidden');
    });
    // pilih HANYA item .opt, bukan wrapper
    menuW.querySelectorAll('.opt').forEach(opt=>{
      opt.addEventListener('click', ()=>{
        selectedWilayah = opt.textContent.trim();
        btnW.innerHTML = selectedWilayah + ' ▾';
        menuW.classList.add('hidden');
        render();
      });
    });

    // === RENDER GRID ===
    const card = b => `
      <a href="./${b.slug}/index.html" class="group block p-4 rounded-2xl bg-white text-slate-800 border hover:shadow-lg transition">
        <div class="text-xs font-semibold text-slate-500">${b.wilayah}</div>
        <div class="mt-1 font-bold text-lg leading-snug">${b.nama}</div>
        <div class="mt-3 inline-flex items-center gap-1 text-surveyLight text-sm">
          Buka peta <span class="transition -translate-x-0 group-hover:translate-x-0.5">→</span>
        </div>
      </a>`;

    function render(){
      const term = (q.value||"").toLowerCase().trim();
      const list = BALAI.filter(b=>{
        const okW = !selectedWilayah || b.wilayah===selectedWilayah;
        const okT = !term || b.nama.toLowerCase().includes(term);
        return okW && okT;
      });
      grid.innerHTML = list.map(card).join('');
      countInfo.textContent = `Menampilkan ${list.length} balai`;
    }

    q.addEventListener('input', render);
    resetBtn.addEventListener('click', ()=>{
      q.value="";
      selectedWilayah="";
      btnW.innerHTML="Semua Wilayah ▾";
      render();
    });

    render();
  </script>
</body>
</html>
