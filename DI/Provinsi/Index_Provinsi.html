<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Link Peta Daerah Irigasi Kewenangan Provinsi</title>
  <meta name="description" content="Daftar tautan peta Daerah Irigasi kewenangan Provinsi se-Indonesia."/>
  <link rel="icon" href="../assets/LogoPUPR.png" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme:{extend:{
        fontFamily:{sans:['Inter','ui-sans-serif','system-ui']},
        colors:{survey:'#0d47a1',surveyDark:'#0a3a85',surveyLight:'#1d5fd1'},
        boxShadow:{header:'0 4px 14px rgba(13,71,161,.18)'}
      }}
    }
  </script>

  <style>
    html{scroll-behavior:smooth}
    :focus-visible{outline:2px solid #1d5fd1;outline-offset:2px}
    /* Badge Si-Irwan */
    .badge-irwan{
      position:fixed; right:16px; bottom:12px; z-index:80;
      background:rgba(13,71,161,.85);
      border:1px solid rgba(255,255,255,.25);
      color:#fff; font-size:13px; font-weight:700;
      padding:6px 12px; border-radius:10px;
      box-shadow:0 0 10px rgba(13,71,161,.6);
      backdrop-filter:blur(6px);
      animation:glow 2.8s ease-in-out infinite;
    }
    .badge-irwan span{ color:#FFD700; }
    @keyframes glow{
      0%,100%{ box-shadow:0 0 8px rgba(13,71,161,.6); }
      50%    { box-shadow:0 0 18px rgba(255,215,0,.8); }
    }
  </style>
</head>
<body class="font-sans antialiased bg-[#0b1222] text-slate-100">

  <!-- Header -->
  <header class="sticky top-0 z-40 bg-survey text-white">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="../index.html" class="flex items-center gap-3">
        <img src="../assets/LogoPUPR.png" class="w-9 h-9" alt="PUPR"/>
        <div class="leading-tight">
          <div class="text-xs uppercase tracking-wide text-white/80">Kementerian Pekerjaan Umum</div>
          <div class="font-semibold">Direktorat Jenderal Sumber Daya Air</div>
          <div class="text-xs text-white/80">Direktorat Irigasi & Rawa</div>
        </div>
      </a>
      <a href="../my-maps/si-irwan.html" class="text-sm bg-white text-survey px-3 py-2 rounded-lg font-semibold">Beranda</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-gradient-to-b from-[#0b1222] via-[#0b1222]/60 to-transparent">
    <div class="max-w-7xl mx-auto px-4 py-8">
      <h1 class="text-2xl md:text-3xl font-extrabold">Link Peta Daerah Irigasi Kewenangan Provinsi</h1>
      <p class="mt-2 text-slate-300">
        Pilih salah satu provinsi untuk membuka peta DI yang menjadi kewenangan provinsi tersebut.
      </p>
    </div>
  </section>

  <!-- Toolbar -->
  <section class="py-4">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex flex-col md:flex-row md:items-center gap-3">
        <div class="flex-1">
          <input id="q" type="search" placeholder="Cari provinsi… (mis. ‘Jawa Barat’, ‘Papua’, ‘NTT’)"
            class="w-full px-4 py-3 rounded-xl border border-white/10 bg-white/10 placeholder:text-slate-400 text-white"/>
        </div>

        <!-- Dropdown Wilayah -->
        <div class="relative inline-block text-left">
          <button id="dropWilayahBtn" aria-haspopup="true" aria-expanded="false"
            class="inline-flex justify-between items-center px-4 py-3 bg-white/10 border border-white/10 rounded-xl text-white w-48 font-medium hover:bg-white/20 transition">
            Semua Wilayah ▾
          </button>
          <div id="dropWilayahMenu"
            class="hidden absolute mt-2 w-56 bg-white rounded-xl shadow-lg ring-1 ring-black/10 z-50">
            <div class="py-1 text-sm text-slate-800">
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Sumatera</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Jawa</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Bali–Nusa</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Kalimantan</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Sulawesi</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Maluku</div>
              <div class="opt px-4 py-2 hover:bg-blue-50 cursor-pointer">Papua</div>
            </div>
          </div>
        </div>

        <button id="reset" class="px-4 py-3 rounded-xl border border-white/15 text-white/90 hover:text-white">Reset</button>
      </div>

      <div class="mt-3 text-sm text-slate-300" id="countInfo">Menampilkan 38 provinsi</div>
    </div>
  </section>

  <!-- Grid -->
  <section class="py-6">
    <div class="max-w-7xl mx-auto px-4">
      <div id="grid" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>
    </div>
  </section>

  <footer class="border-t border-white/10 mt-10">
    <div class="max-w-7xl mx-auto px-4 py-8 text-sm text-slate-300 flex items-center justify-between">
      <span>© 2025</span>
    </div>
  </footer>

  <!-- Badge Si-Irwan -->
  <div class="badge-irwan" title="Sistem Informasi Irigasi & Rawa Nasional">
    <span>Si-Irwan v1.0</span>
  </div>

  <script>
    // === DATA PROVINSI (38) ===
    const PROVINSI = [
      // Sumatera
      { nama:'Aceh', wilayah:'Sumatera' },
      { nama:'Sumatera Utara', wilayah:'Sumatera' },
      { nama:'Sumatera Barat', wilayah:'Sumatera' },
      { nama:'Riau', wilayah:'Sumatera' },
      { nama:'Kepulauan Riau', wilayah:'Sumatera' },
      { nama:'Jambi', wilayah:'Sumatera' },
      { nama:'Sumatera Selatan', wilayah:'Sumatera' },
      { nama:'Bangka Belitung', wilayah:'Sumatera' },
      { nama:'Bengkulu', wilayah:'Sumatera' },
      { nama:'Lampung', wilayah:'Sumatera' },

      // Jawa
      { nama:'DKI Jakarta', wilayah:'Jawa' },
      { nama:'Banten', wilayah:'Jawa' },
      { nama:'Jawa Barat', wilayah:'Jawa' },
      { nama:'Jawa Tengah', wilayah:'Jawa' },
      { nama:'DI Yogyakarta', wilayah:'Jawa' },
      { nama:'Jawa Timur', wilayah:'Jawa' },

      // Bali–Nusa
      { nama:'Bali', wilayah:'Bali–Nusa' },
      { nama:'Nusa Tenggara Barat', wilayah:'Bali–Nusa' },
      { nama:'Nusa Tenggara Timur', wilayah:'Bali–Nusa' },

      // Kalimantan
      { nama:'Kalimantan Barat', wilayah:'Kalimantan' },
      { nama:'Kalimantan Tengah', wilayah:'Kalimantan' },
      { nama:'Kalimantan Selatan', wilayah:'Kalimantan' },
      { nama:'Kalimantan Timur', wilayah:'Kalimantan' },
      { nama:'Kalimantan Utara', wilayah:'Kalimantan' },

      // Sulawesi
      { nama:'Sulawesi Utara', wilayah:'Sulawesi' },
      { nama:'Gorontalo', wilayah:'Sulawesi' },
      { nama:'Sulawesi Tengah', wilayah:'Sulawesi' },
      { nama:'Sulawesi Barat', wilayah:'Sulawesi' },
      { nama:'Sulawesi Selatan', wilayah:'Sulawesi' },
      { nama:'Sulawesi Tenggara', wilayah:'Sulawesi' },

      // Maluku
      { nama:'Maluku', wilayah:'Maluku' },
      { nama:'Maluku Utara', wilayah:'Maluku' },

      // Papua (pemekaran)
      { nama:'Papua', wilayah:'Papua' },
      { nama:'Papua Barat', wilayah:'Papua' },
      { nama:'Papua Barat Daya', wilayah:'Papua' },
      { nama:'Papua Tengah', wilayah:'Papua' },
      { nama:'Papua Pegunungan', wilayah:'Papua' },
      { nama:'Papua Selatan', wilayah:'Papua' },
    ].map(p => ({...p, slug:p.nama.toLowerCase()
                                  .replace(/&/g,'-dan-')
                                  .replace(/[^a-z0-9]+/g,'-')
                                  .replace(/(^-|-$)/g,'')}));

    const grid = document.getElementById('grid');
    const q = document.getElementById('q');
    const resetBtn = document.getElementById('reset');
    const countInfo = document.getElementById('countInfo');
    const btnW = document.getElementById('dropWilayahBtn');
    const menuW = document.getElementById('dropWilayahMenu');
    let selectedWilayah = "";

    // === DROPDOWN ===
    btnW.addEventListener('click', ()=>{
      const open = menuW.classList.toggle('hidden');
      btnW.setAttribute('aria-expanded', open ? 'false':'true');
    });
    document.addEventListener('click', e=>{
      if(!btnW.contains(e.target) && !menuW.contains(e.target)) menuW.classList.add('hidden');
    });
    menuW.querySelectorAll('.opt').forEach(opt=>{
      opt.addEventListener('click', ()=>{
        selectedWilayah = opt.textContent.trim();
        btnW.innerHTML = selectedWilayah + ' ▾';
        menuW.classList.add('hidden');
        render();
      });
    });

    // === CARD TEMPLATE ===
    const card = p => `
      <a href="./${p.slug}/index.html" class="group block p-4 rounded-2xl bg-white text-slate-800 border hover:shadow-lg transition">
        <div class="text-xs font-semibold text-slate-500">${p.wilayah}</div>
        <div class="mt-1 font-bold text-lg leading-snug">${p.nama}</div>
        <div class="mt-3 inline-flex items-center gap-1 text-surveyLight text-sm">
          Buka peta DI Provinsi <span class="transition -translate-x-0 group-hover:translate-x-0.5">→</span>
        </div>
      </a>`;

    // === RENDER ===
    function render(){
      const term = (q.value||"").toLowerCase().trim();
      const list = PROVINSI.filter(p=>{
        const okW = !selectedWilayah || p.wilayah===selectedWilayah;
        const okT = !term || p.nama.toLowerCase().includes(term);
        return okW && okT;
      });
      grid.innerHTML = list.map(card).join('');
      countInfo.textContent = `Menampilkan ${list.length} provinsi`;
    }

    q.addEventListener('input', render);
    resetBtn.addEventListener('click', ()=>{
      q.value="";
      selectedWilayah="";
      btnW.innerHTML="Semua Wilayah ▾";
      render();
    });

    // init
    render();
  </script>
</body>
</html>
